<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <title>Document</title>
    <style>
        canvas {
            margin-left: 7%;
            margin-right: 7%;
            margin-top: 10%;
            background-image: url("GameAssets/bg1.jpg");
        }

        button {
            margin-top: 5%;
            margin-left: 25%;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>

    <button id="start" class="btn btn-primary w-50">Start</button>

    <script>
        //Gamge assets
        let lives = 1;
        let level = 1;
        let frames = 0;
        let stars = {
            src: "GameAssets/star.png",
            count: 0,
            width: 100,
            height: 100,
            x: 0,
            y: 0
        };
        let meteor = {
            src: "GameAssets/meteor.png",
            width: 100,
            height: 100,
            x: 0,
            y: 0
        };
        let rocket = {
            src: "GameAssets/rocket.png",
            width: 60,
            height: 60,
            x: 50,
            y: 220
        }
        let inGame = false;
        let startBttn = document.querySelector("#start");

        //Canvas where the game elements are drawn onto
        let canvas = document.querySelector("#canvas");
        canvas.width = 900;
        canvas.height = 500;
        let ctx = canvas.getContext("2d");

        //Set the background of the underneath canvas
        let rocketImage = new Image();
        rocketImage.src = rocket.src;
        rocketImage.width = rocket.width;
        rocketImage.height = rocket.height;
        
        let draw = () => {
            ctx.clearRect(0,0, canvas.width, canvas.height);
            ctx.drawImage(rocketImage, rocket.x, rocket.y, rocket.width, rocket.height);
            //console.log(rocket.x, rocket.y);
            window.requestAnimationFrame(draw);
        }

        //Add a start button that starts drawing
        startBttn.addEventListener("click", (event) => {
            inGame = true;
            draw();
        });

        document.addEventListener("keydown", (event) => {
            if(inGame) {
                const keyname = event.key;
                console.log(event.key);
                if(keyname == "ArrowLeft" && rocket.y >= 20) {
                    rocket.y -= 20;
                }
                if(keyname == "ArrowRight" && rocket.y <= 430) {
                    rocket.y += 20;
                }
            }
        })
        
    </script>
</body>
</html>